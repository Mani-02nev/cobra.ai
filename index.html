<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>THINK.IO | Neural Interface</title>
     <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

     <style>
          :root {
               --neon-blue: #00d2ff;
               --neon-purple: #9d50bb;
               --bg-dark: #05070a;
               --glass: rgba(15, 20, 30, 0.7);
               --glass-border: rgba(255, 255, 255, 0.1);
               --text-main: #e2e8f0;
               --sidebar-w: 280px;
          }

          * {
               margin: 0;
               padding: 0;
               box-sizing: border-box;
               font-family: 'Plus Jakarta Sans', sans-serif;
          }

          body {
               background-color: var(--bg-dark);
               color: var(--text-main);
               overflow: hidden;
               height: 100vh;
          }

          /* --- 3D GALAXY ANIMATION --- */
          #canvas-container {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               z-index: -1;
               perspective: 1000px;
               background: radial-gradient(circle at center, #111a2d 0%, #05070a 100%);
          }

          canvas { display: block; }

          /* --- UI LAYOUT --- */
          .app-wrapper {
               display: flex;
               height: 100vh;
               backdrop-filter: blur(5px);
          }

          /* --- HOLOGRAPHIC SIDEBAR --- */
          .sidebar {
               width: var(--sidebar-w);
               background: var(--glass);
               backdrop-filter: blur(20px);
               border-right: 1px solid var(--glass-border);
               display: flex;
               flex-direction: column;
               transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
               z-index: 100;
          }

          .sidebar.collapsed { margin-left: calc(-1 * var(--sidebar-w)); }

          .brand {
               padding: 30px;
               display: flex;
               align-items: center;
               gap: 12px;
               font-weight: 800;
               letter-spacing: 2px;
               color: var(--neon-blue);
               text-shadow: 0 0 15px rgba(0, 210, 255, 0.5);
          }

          .brand i { font-size: 1.8rem; }

          .nav-btn {
               margin: 5px 15px;
               padding: 12px 15px;
               border-radius: 12px;
               border: 1px solid transparent;
               background: rgba(255, 255, 255, 0.03);
               color: #94a3b8;
               cursor: pointer;
               display: flex;
               align-items: center;
               gap: 12px;
               transition: 0.3s;
               text-decoration: none;
          }

          .nav-btn:hover, .nav-btn.active {
               background: rgba(0, 210, 255, 0.1);
               border-color: rgba(0, 210, 255, 0.3);
               color: white;
               box-shadow: 0 0 20px rgba(0, 210, 255, 0.1);
          }

          /* --- MAIN CHAT INTERFACE --- */
          .main-content {
               flex: 1;
               display: flex;
               flex-direction: column;
               position: relative;
          }

          header {
               padding: 20px 40px;
               display: flex;
               justify-content: space-between;
               align-items: center;
               background: rgba(5, 7, 10, 0.4);
               border-bottom: 1px solid var(--glass-border);
          }

          .chat-body {
               flex: 1;
               overflow-y: auto;
               padding: 40px;
               scroll-behavior: smooth;
          }

          /* --- NEON BUBBLES --- */
          .msg {
               margin-bottom: 30px;
               display: flex;
               gap: 15px;
               animation: slideIn 0.4s ease-out;
          }

          @keyframes slideIn { from { opacity:0; transform: translateY(20px); } }

          .msg-content {
               max-width: 70%;
               padding: 18px 24px;
               border-radius: 20px;
               line-height: 1.6;
               position: relative;
               box-shadow: 0 10px 30px rgba(0,0,0,0.3);
          }

          .user-msg { justify-content: flex-end; }
          .user-msg .msg-content {
               background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
               color: white;
               border-bottom-right-radius: 2px;
          }

          .ai-msg .msg-content {
               background: var(--glass);
               border: 1px solid var(--glass-border);
               color: var(--text-main);
               border-bottom-left-radius: 2px;
               backdrop-filter: blur(10px);
          }

          .avatar {
               width: 40px;
               height: 40px;
               border-radius: 12px;
               background: #1e293b;
               display: flex;
               align-items: center;
               justify-content: center;
               font-size: 1.2rem;
               border: 1px solid var(--glass-border);
          }

          /* --- FUTURISTIC DOCK --- */
          .input-dock {
               padding: 30px 40px;
               background: transparent;
          }

          .dock-container {
               max-width: 900px;
               margin: 0 auto;
               background: rgba(20, 25, 35, 0.8);
               border: 1px solid var(--glass-border);
               border-radius: 24px;
               padding: 10px 20px;
               display: flex;
               align-items: center;
               gap: 15px;
               box-shadow: 0 -10px 40px rgba(0,0,0,0.4);
          }

          textarea {
               flex: 1;
               background: transparent;
               border: none;
               color: white;
               font-size: 1rem;
               outline: none;
               resize: none;
               padding: 10px 0;
          }

          .action-btn {
               width: 45px;
               height: 45px;
               border-radius: 15px;
               border: none;
               background: rgba(255, 255, 255, 0.05);
               color: #94a3b8;
               cursor: pointer;
               transition: 0.3s;
               display: flex;
               align-items: center;
               justify-content: center;
               font-size: 1.2rem;
          }

          .action-btn:hover {
               background: var(--neon-blue);
               color: white;
               box-shadow: 0 0 20px rgba(0, 210, 255, 0.4);
               transform: translateY(-2px);
          }

          /* --- TYPING --- */
          .typing { display: flex; gap: 5px; padding: 10px; }
          .dot { width: 8px; height: 8px; background: var(--neon-blue); border-radius: 50%; animation: pulse 1.5s infinite; }
          @keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

          ::-webkit-scrollbar { width: 5px; }
          ::-webkit-scrollbar-thumb { background: var(--neon-blue); border-radius: 10px; }
     </style>
</head>

<body>
     <div id="canvas-container"></div>

     <div class="app-wrapper">
          <aside class="sidebar" id="sidebar">
               <div class="brand">
                    <i class="bi bi-cpu-fill"></i>
                    <span>THINK.IO</span>
               </div>

               <button class="nav-btn active" id="newChat">
                    <i class="bi bi-plus-square-dotted"></i> New Evolution
               </button>

               <div style="flex:1; margin-top: 20px;">
                    <p style="padding: 0 30px; font-size: 0.7rem; color: #64748b; text-transform: uppercase;">Recent Neural Links</p>
                    <div id="chatHistory"></div>
               </div>

               <div style="padding: 20px; border-top: 1px solid var(--glass-border);">
                    <a href="#" class="nav-btn"><i class="bi bi-shield-lock"></i> Encryption</a>
                    <a href="#" class="nav-btn"><i class="bi bi-gear-wide-connected"></i> Core Settings</a>
               </div>
          </aside>

          <main class="main-content">
               <header>
                    <button class="action-btn" id="toggleSidebar"><i class="bi bi-text-indent-left"></i></button>
                    <div style="text-align: center;">
                         <div style="font-size: 0.9rem; font-weight: 700; color: var(--neon-blue);">MODEL: GEMINI 2.5 FLASH</div>
                         <div style="font-size: 0.6rem; color: #64748b;">QUANTUM ENCRYPTED CONNECTION</div>
                    </div>
                    <button class="action-btn"><i class="bi bi-grid-3x3-gap-fill"></i></button>
               </header>

               <div class="chat-body" id="chatMessages">
                    <div id="welcome" style="text-align: center; margin-top: 15vh;">
                         <i class="bi bi-hurricane" style="font-size: 4rem; color: var(--neon-blue); filter: drop-shadow(0 0 10px var(--neon-blue));"></i>
                         <h1 style="margin: 20px 0; font-weight: 800; font-size: 2.5rem;">Initialize Neural Link</h1>
                         <p style="color: #94a3b8; max-width: 400px; margin: 0 auto;">Connect with the artificial intelligence to expand your cognitive horizons.</p>
                    </div>
               </div>

               <div id="typing" style="display: none; margin: 0 40px;">
                    <div class="dot"></div>
                    <div class="dot" style="animation-delay: 0.2s;"></div>
                    <div class="dot" style="animation-delay: 0.4s;"></div>
               </div>

               <div class="input-dock">
                    <div class="dock-container">
                         <button class="action-btn"><i class="bi bi-incognito"></i></button>
                         <textarea id="userInput" placeholder="Synthesize command..." rows="1"></textarea>
                         <button class="action-btn"><i class="bi bi-mic-fill"></i></button>
                         <button class="action-btn" style="background: var(--neon-blue); color: white;" id="sendBtn">
                              <i class="bi bi-send-check-fill"></i>
                         </button>
                    </div>
               </div>
          </main>
     </div>

     <script type="module">
          import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

          // --- 3D ROUND GALAXY ENGINE ---
          const container = document.getElementById('canvas-container');
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          container.appendChild(canvas);

          let particles = [];
          const particleCount = 600;
          let angle = 0;

          function initCanvas() {
               canvas.width = window.innerWidth;
               canvas.height = window.innerHeight;
               particles = [];
               for(let i=0; i<particleCount; i++) {
                    particles.push({
                         r: Math.random() * Math.min(canvas.width, canvas.height) * 0.45,
                         a: Math.random() * Math.PI * 2,
                         s: Math.random() * 0.005,
                         z: Math.random() * 2,
                         color: Math.random() > 0.5 ? '#00d2ff' : '#9d50bb'
                    });
               }
          }

          function render() {
               ctx.fillStyle = 'rgba(5, 7, 10, 0.15)';
               ctx.fillRect(0, 0, canvas.width, canvas.height);
               
               const cx = canvas.width / 2;
               const cy = canvas.height / 2;

               particles.forEach(p => {
                    p.a += p.s;
                    // Simulate 3D tilt
                    let x = cx + Math.cos(p.a) * p.r;
                    let y = cy + Math.sin(p.a) * p.r * 0.4; // Tilted disk
                    
                    let size = (Math.sin(p.a) + 2) * p.z;
                    
                    ctx.fillStyle = p.color;
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = p.color;
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
               });
               requestAnimationFrame(render);
          }

          window.addEventListener('resize', initCanvas);
          initCanvas();
          render();

          // --- CORE AI LOGIC ---
          const API_KEY = "AIzaSyDIvPaNY9Qn7E7klv15X5J80K4tfbLIDV0";
          const genAI = new GoogleGenerativeAI(API_KEY);
          const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

          let history = [];

          async function sendMessage() {
               const val = userInput.value.trim();
               if(!val) return;

               document.getElementById('welcome').style.display = 'none';
               addMessage(val, 'user');
               userInput.value = '';
               
               const typing = document.getElementById('typing');
               typing.style.display = 'flex';

               try {
                    history.push({ role: "user", parts: [{ text: val }] });
                    const result = await model.generateContent({ contents: history });
                    const response = await result.response.text();
                    
                    typing.style.display = 'none';
                    addMessage(response, 'ai');
                    history.push({ role: "model", parts: [{ text: response }] });
               } catch (e) {
                    typing.style.display = 'none';
                    addMessage("CORE ERROR: LINK ESTABLISHMENT FAILED.", 'ai');
               }
          }

          function addMessage(text, role) {
               const container = document.getElementById('chatMessages');
               const wrap = document.createElement('div');
               wrap.className = `msg ${role}-msg`;
               
               const avatar = role === 'ai' ? '<div class="avatar"><i class="bi bi-robot"></i></div>' : '';
               
               wrap.innerHTML = `
                    ${avatar}
                    <div class="msg-content">${text}</div>
               `;
               
               container.appendChild(wrap);
               container.scrollTop = container.scrollHeight;
          }

          document.getElementById('sendBtn').onclick = sendMessage;
          document.getElementById('toggleSidebar').onclick = () => {
               document.getElementById('sidebar').classList.toggle('collapsed');
          };
          userInput.addEventListener('keydown', (e) => { if(e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }});

     </script>
</body>

</html>
